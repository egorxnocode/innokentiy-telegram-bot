# ü§ñ Innokentiy Telegram Bot

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π Telegram –±–æ—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π N8N –∏ OpenAI.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîê –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **Email –≤–∞–ª–∏–¥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ Supabase
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∏—à–∏** —á–µ—Ä–µ–∑ N8N + AI
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–µ–π OpenAI

### üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** –≤ 9:00
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–µ–º** –ø–æ–¥ –Ω–∏—à—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç** 10 –ø–æ—Å—Ç–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤**

### üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ–± –æ—à–∏–±–∫–∞—Ö
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–∞–π–º–∞—É—Ç–æ–≤** N8N
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- **–°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è** —Å health checks

### üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**
- **Supabase –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å RLS
- **N8N –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (3 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ–±—Ö—É–∫–∞)
- **OpenAI Whisper** –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏
- **Graceful shutdown** –∏ error handling

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/username/innokentiy-bot.git
cd innokentiy-bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
./setup.sh

# –ò–ª–∏ —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
cp config.env.example config.env
nano config.env
```

### 3. –ó–∞–ø—É—Å–∫
```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./scripts/deploy.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./scripts/status.sh
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `config.env`:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=1234567890:AAEhBOwwepo6LRDLuHOPEXAMPLE

# Supabase
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# OpenAI
OPENAI_API_KEY=sk-...

# N8N Webhooks
N8N_NICHE_WEBHOOK_URL=https://your-n8n.com/webhook/niche-detection
N8N_TOPIC_WEBHOOK_URL=https://your-n8n.com/webhook/topic-adaptation
N8N_POST_WEBHOOK_URL=https://your-n8n.com/webhook/post-generation

# Admin Notifications
ADMIN_CHAT_ID=123456789
ENABLE_ADMIN_NOTIFICATIONS=True
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram Bot  ‚îÇ    ‚îÇ      N8N        ‚îÇ    ‚îÇ    Supabase     ‚îÇ
‚îÇ   (—ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç) ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (–≤–Ω–µ—à–Ω–∏–π)     ‚îÇ    ‚îÇ   (–≤–Ω–µ—à–Ω–∏–π)     ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `daily_content` - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Å–æ–æ–±—â–µ–Ω–∏—è + —Ç–µ–º—ã + –≤–æ–ø—Ä–æ—Å—ã)
- `user_post_limits` - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã
- `generated_posts` - –∏—Å—Ç–æ—Ä–∏—è –ø–æ—Å—Ç–æ–≤

### N8N Workflows
1. **Niche Detection** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∏—à–∏ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é
2. **Topic Adaptation** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–µ–º—ã –ø–æ–¥ –Ω–∏—à—É
3. **Post Generation** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –ø–æ –æ—Ç–≤–µ—Ç—É

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./scripts/deploy.sh              # –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./scripts/deploy.sh staging      # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ staging

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
./scripts/status.sh              # –ü–æ–ª–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
./scripts/logs.sh follow         # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./scripts/logs.sh errors         # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
./scripts/restart.sh soft        # –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./scripts/restart.sh hard        # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
./scripts/stop.sh                # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
./scripts/stop.sh clean          # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
./scripts/backup.sh              # –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check
```bash
curl http://localhost:8080/health
```

### –õ–æ–≥–∏
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./scripts/logs.sh follow

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
./scripts/logs.sh errors

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
./scripts/logs.sh stats
```

### –ê–¥–º–∏–Ω—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –æ:
- üî¥ –û—à–∏–±–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üü° –¢–∞–π–º–∞—É—Ç–∞—Ö N8N
- üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
cp config.env.example config.env

# –ó–∞–ø—É—Å–∫
python main.py
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ bot.py                  # Telegram bot –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ database.py             # –†–∞–±–æ—Ç–∞ —Å Supabase
‚îú‚îÄ‚îÄ post_system.py          # –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ admin_notifier.py       # –ê–¥–º–∏–Ω—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ scheduler.py            # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚îú‚îÄ‚îÄ utils.py                # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ error_handler.py        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ messages.py             # –¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ config.py               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile              # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker Compose
‚îî‚îÄ‚îÄ scripts/                # –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ deploy.sh
    ‚îú‚îÄ‚îÄ logs.sh
    ‚îú‚îÄ‚îÄ restart.sh
    ‚îú‚îÄ‚îÄ stop.sh
    ‚îú‚îÄ‚îÄ status.sh
    ‚îî‚îÄ‚îÄ backup.sh
```

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```bash
docker-compose build
```

### –ó–∞–ø—É—Å–∫
```bash
docker-compose up -d
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º
–ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏ `services-network` –¥–ª—è —Å–≤—è–∑–∏ —Å N8N –∏ Supabase.

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ—Å—É—Ä—Å—ã
- **–ü–∞–º—è—Ç—å**: 256MB - 512MB
- **CPU**: 0.25 - 0.5 cores
- **–î–∏—Å–∫**: ~100MB (–±–µ–∑ –ª–æ–≥–æ–≤)

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç 10 –ø–æ—Å—Ç–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- –ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å

### –î–∞–Ω–Ω—ã–µ
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./scripts/status.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./scripts/logs.sh errors

# –ñ–µ—Å—Ç–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./scripts/restart.sh hard
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å N8N
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–µ–±—Ö—É–∫–æ–≤
grep N8N config.env

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
curl -X POST $N8N_NICHE_WEBHOOK_URL -H "Content-Type: application/json" -d '{"test":true}'
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Supabase
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
curl "$SUPABASE_URL/rest/v1/" -H "apikey: $SUPABASE_KEY"
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [N8N Webhook Guide](N8N_WEBHOOK_GUIDE.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ N8N workflows
- [Admin Notifications Guide](ADMIN_NOTIFICATIONS_GUIDE.md) - –ê–¥–º–∏–Ω—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [Database Schema](database_schema.sql) - –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE) —Ñ–∞–π–ª.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Issues**: [GitHub Issues](https://github.com/username/innokentiy-bot/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [Wiki](https://github.com/username/innokentiy-bot/wiki)
- **–û–±—Å—É–∂–¥–µ–Ω–∏—è**: [Discussions](https://github.com/username/innokentiy-bot/discussions)

---

Made with ‚ù§Ô∏è for content creators